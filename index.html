<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Twitter Stuff</title>

    <style type="text/css">
      #map-canvas {
        height: 700px;
      }
      .labels {
     color: white;
     background-color: red;
     font-family: "Lucida Grande", "Arial", sans-serif;
     font-size: 10px;
     font-weight: bold;
     text-align: center;
     font-color: blue;
     width: 10px;
      height: 10px;
     border: 1px solid black;
     white-space: nowrap;
   }
    </style>

    <script type="text/javascript"
        src="http://www.google.com/jsapi?autoload={'modules':[{name:'maps',version:3,other_params:'sensor=false'}]}"></script>
    <script type="text/javascript" src="markerwithlabel.js"></script>
    <script type="text/javascript">
/**
 * A radius widget that add a circle to a map and centers on a marker.
 *
 * @constructor
 */
function RadiusWidget() {
  var circle = new google.maps.Circle({
    strokeWeight: 2
  });

  // Set the distance property value, default to 50km.
  this.set('distance', 50);

  // Bind the RadiusWidget bounds property to the circle bounds property.
  this.bindTo('bounds', circle);

  // Bind the circle center to the RadiusWidget center property
  circle.bindTo('center', this);

  // Bind the circle map to the RadiusWidget map
  circle.bindTo('map', this);

  // Bind the circle radius property to the RadiusWidget radius property
  circle.bindTo('radius', this);

  this.addSizer_();
}

RadiusWidget.prototype = new google.maps.MVCObject();

/**
 * Add the sizer marker to the map.
 *
 * @private
 */
RadiusWidget.prototype.addSizer_ = function() {
  var sizer = new google.maps.Marker({
    draggable: true,
    title: 'Drag me!'
  });

  sizer.bindTo('map', this);
  sizer.bindTo('position', this, 'sizer_position');

var me = this;
google.maps.event.addListener(sizer, 'drag', function() {
  // Set the circle distance (radius)
  me.setDistance();
});


};


/**
 * Update the radius when the distance has changed.
 */
RadiusWidget.prototype.distance_changed = function() {
  this.set('radius', this.get('distance') * 1000);
};

/*
 * A distance widget that will display a circle that can be resized and will
 * provide the radius in km.
 *
 * @param {google.maps.Map} map The map on which to attach the distance widget.
 *
 * @constructor
 */
function DistanceWidget(map) {
  this.set('map', map);
  this.set('position', map.getCenter());

  var marker = new google.maps.Marker({
    draggable: true,
    title: 'Move me!'
  });

  // Bind the marker map property to the DistanceWidget map property
  marker.bindTo('map', this);

  // Bind the marker position property to the DistanceWidget position
  // property
  marker.bindTo('position', this);

// Create a new radius widget
var radiusWidget = new RadiusWidget();

// Bind the radiusWidget map to the DistanceWidget map
radiusWidget.bindTo('map', this);

// Bind the radiusWidget center to the DistanceWidget position
radiusWidget.bindTo('center', this, 'position');

// Bind to the radiusWidgets' distance property
this.bindTo('distance', radiusWidget);

// Bind to the radiusWidgets' bounds property
this.bindTo('bounds', radiusWidget);


}
/**
 * Update the center of the circle and position the sizer back on the line.
 *
 * Position is bound to the DistanceWidget so this is expected to change when
 * the position of the distance widget is changed.
 */
RadiusWidget.prototype.center_changed = function() {
  var bounds = this.get('bounds');

  // Bounds might not always be set so check that it exists first.
  if (bounds) {
    var lng = bounds.getNorthEast().lng();

    // Put the sizer at center, right on the circle.
    var position = new google.maps.LatLng(this.get('center').lat(), lng);
    this.set('sizer_position', position);
  }
};


/**
 * Calculates the distance between two latlng locations in km.
 * @see http://www.movable-type.co.uk/scripts/latlong.html
 *
 * @param {google.maps.LatLng} p1 The first lat lng point.
 * @param {google.maps.LatLng} p2 The second lat lng point.
 * @return {number} The distance between the two points in km.
 * @private
*/
RadiusWidget.prototype.distanceBetweenPoints_ = function(p1, p2) {
  if (!p1 || !p2) {
    return 0;
  }

  var R = 6371; // Radius of the Earth in km
  var dLat = (p2.lat() - p1.lat()) * Math.PI / 180;
  var dLon = (p2.lng() - p1.lng()) * Math.PI / 180;
  var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) *
    Math.sin(dLon / 2) * Math.sin(dLon / 2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  var d = R * c;
  return d;
};


/**
 * Set the distance of the circle based on the position of the sizer.
 */
RadiusWidget.prototype.setDistance = function() {
  // As the sizer is being dragged, its position changes.  Because the
  // RadiusWidget's sizer_position is bound to the sizer's position, it will
  // change as well.
  var pos = this.get('sizer_position');
  var center = this.get('center');
  var distance = this.distanceBetweenPoints_(center, pos);

  // Set the distance property for any objects that are bound to it
  this.set('distance', distance);
};

// Jamison random word function
function makeid()
{
    var text = "";
    var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

    for( var i=0; i < 5; i++ )
        text += possible.charAt(Math.floor(Math.random() * possible.length));

    return text;
}

DistanceWidget.prototype = new google.maps.MVCObject();

      function init() {
        var mapDiv = document.getElementById('map-canvas');
        var map = new google.maps.Map(mapDiv, {
          center: new google.maps.LatLng(39.2833, -76.6167),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP


   
        });

// JAMISON

var hashtag = new Array();
hashtag[0] = "#yoloswag";
hashtag[1] = "#selfie";
hashtag[2] = "#chicken";
hashtag[3] = "#thelife";
hashtag[4] = "#moresnow";
hashtag[5] = "#n0school";
hashtag[6] = "#hangover";
hashtag[7] = "#mapreduce";
hashtag[8] = "#sqoop";
hashtag[9] = "#chair";
hashtag[10] = "#hungry";

     
     var cityCoordinates = new Array();
     cityCoordinates[0] = new google.maps.LatLng(39.254935, -76.714000);
     cityCoordinates[1] = new google.maps.LatLng(39.510310, -76.169178);
cityCoordinates[2] = new google.maps.LatLng(39.628074, -79.319996);
cityCoordinates[3] = new google.maps.LatLng(39.159982, -76.610588);
cityCoordinates[4] = new google.maps.LatLng(39.441155, -77.543761);
cityCoordinates[5] = new google.maps.LatLng(38.949361, -76.898016);
cityCoordinates[6] = new google.maps.LatLng(38.540630, -75.719021);
cityCoordinates[7] = new google.maps.LatLng(38.937244, -76.845734);
cityCoordinates[8] = new google.maps.LatLng(38.996560, -76.927509);
cityCoordinates[9] = new google.maps.LatLng(38.986389, -76.852932);
cityCoordinates[10] = new google.maps.LatLng(38.969259, -76.240177);

var marker = new Array();
var iw = new Array();
for (var i = 0; i < cityCoordinates.length; i++){

     var marker1 = new MarkerWithLabel({
       position: cityCoordinates[i],
       draggable: true,
       raiseOnDrag: true,
       map: map,
       labelContent: "$425K",
       labelAnchor: new google.maps.Point(22, 0),
       labelClass: "labels", // the CSS class for the label
       labelStyle: {opacity: 0.0}
     });

var iw1 = new google.maps.InfoWindow({
       content: hashtag[i]
     });
     google.maps.event.addListener(marker1, "mouseover", function (e) { iw1.open(map, this); });
}

var distanceWidget = new DistanceWidget(map);
google.maps.event.addListener(distanceWidget, 'distance_changed', function() {
  displayInfo(distanceWidget);
});

google.maps.event.addListener(distanceWidget, 'position_changed', function() {
  displayInfo(distanceWidget);
});      


      }
      google.maps.event.addDomListener(window, 'load', init);

function displayInfo(widget) {
  var info = document.getElementById('info');
  info.innerHTML = 'Position: ' + widget.get('position') + ', distance: ' +
    widget.get('distance');
}


    </script>
  </head>
  <body>
    <div id="map-canvas"></div>
<div id="info"></div>
  </body>
</html>
